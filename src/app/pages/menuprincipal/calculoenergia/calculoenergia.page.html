<app-header title="Cálculo de energía"></app-header>
<button id="fallback-focus" style="position: absolute; left: -9999px;" tabindex="-1">Fallback</button>
<ion-content class="ion-padding">
  
<!-- Imagen dinámica del ambiente -->
<div class="imagen-ambiente-container">
  <img [src]="imagenAmbiente" alt="Imagen del ambiente" class="imagen-ambiente" />
</div>

  <!-- Select de ambiente -->
  <ion-item>
    <ion-label>Ambiente</ion-label>
    <ion-select [(ngModel)]="ambienteSeleccionado">
      <ion-select-option *ngFor="let amb of ambientes" [value]="amb">{{ amb }}</ion-select-option>
    </ion-select>
  </ion-item>

  <!-- Select de equipos -->
  <ion-item>
    <ion-label>Equipo</ion-label>
    <ion-select placeholder="Selecciona un equipo" (ionChange)="abrirModalConEquipo($event.detail.value)">
      <ion-select-option *ngFor="let eq of equipos" [value]="eq">
        {{ eq.nombre }} ({{ eq.potencia }} W)
      </ion-select-option>
    </ion-select>
  </ion-item>

  <!-- Lista de equipos agregados -->
  <ion-list *ngIf="equiposAgregados.length > 0">
    <ion-card *ngFor="let eq of equiposAgregados">
      <ion-card-header>
        <ion-card-title>{{ eq.nombre }}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p><strong>KWh:</strong> {{ eq.kwh }}</p>
        <p><strong>KWh/mes:</strong> {{ eq.kwhMes }}</p>
        <p><strong>Costo aprox.:</strong> S/ {{ eq.costo }}</p>
      </ion-card-content>
    </ion-card>
  </ion-list>

  <!-- Mensaje si no hay equipos -->
  <ion-text *ngIf="equiposAgregados.length === 0" color="medium">
    No se ha agregado ningún equipo aún.
  </ion-text>

</ion-content>
